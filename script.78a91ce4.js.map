{"version":3,"sources":["../node_modules/pixel-glass/script.js"],"names":[],"mappings":"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","file":"script.78a91ce4.js","sourceRoot":"../src","sourcesContent":["function pixelGlass() {\n\n  'use strict';\n\n  var doc = document;\n  var controlsPanel;\n  var bodyContentWrapper;\n  var panelClass = 'controls-panel';\n  var canBeDisabled = [];\n\n  var prefix = 'pg';\n  var filtersList = ['none', 'invert'];\n  var statesList = ['off', 'on'];\n\n  var currents = {\n    state: getCurrent('state', statesList[1]),\n    filter: getCurrent('filter', filtersList[0]),\n    opacity: getCurrent('opacity', 0.5)\n  };\n\n  var targets = {\n    state: {\n      elem: doc.documentElement,\n      attr: 'data'\n    },\n    filter: {\n      elem: doc.body,\n      attr: 'data'\n    },\n    opacity: {\n      elem: doc.body,\n      attr: 'style'\n    }\n  };\n\n  // States switcher params\n  var paramsStates = {\n    elemTag: 'button',\n    elemText: 'on',\n    listName: 'states',\n    itemName: 'state',\n    target: targets.state,\n    type: 'button',\n    list: statesList,\n    canDisableAll: true,\n    attrs: {\n      tabindex: 1,\n    }\n  };\n\n  // Filters switcher params\n  var paramsFilters = {\n    elemTag: 'button',\n    elemText: 'invert',\n    listName: 'filters',\n    itemName: 'filter',\n    target: targets.filter,\n    type: 'button',\n    list: filtersList,\n    attrs: {\n      tabindex: 2,\n    }\n  };\n\n  // Opacity range params\n  var paramsOpacity = {\n    itemName: 'opacity',\n    type: 'number',\n    target: targets.opacity,\n    setAttr: 'style',\n    attrs: {\n      min: 0,\n      max: 1,\n      step: 0.1,\n      tabindex: 3,\n    }\n  };\n\n  //---------------------------------------------\n\n  init();\n\n  //---------------------------------------------\n\n  function init() {\n    createContolsPanel();\n    applyCurrentData();\n\n    if (currents.state === 'on'){\n      applyCurrentStyles();\n    }\n  }\n\n  //---------------------------------------------\n\n  function createContolsPanel() {\n    var targetElem = doc.documentElement;\n\n    if ( hasData( doc.body, 'has-sticky-point' ) ) {\n      var stickyPoint = doc.querySelector('.sticky-point');\n\n      if( stickyPoint && !localStorage['pg-released'] ) {\n        targetElem = stickyPoint;\n      }\n      // Override defaults for demo page\n      currents.state = 'off';\n    }\n\n    controlsPanel = doc.createElement('div');\n    controlsPanel.classList.add(panelClass);\n    targetElem.appendChild(controlsPanel);\n    var sides = ['top', 'right', 'bottom', 'left'];\n\n    sides.forEach(function(item) {\n      var itemVal = getCurrent(item, '');\n      if ( itemVal ) {\n        controlsPanel.style[ item ] = itemVal;\n      }\n    });\n\n    initControls();\n  }\n\n  //---------------------------------------------\n\n  function initControls() {\n    createButton(paramsStates);\n    createButton(paramsFilters);\n    createInputNumber(paramsOpacity);\n\n    createDragButton();\n  }\n\n  //---------------------------------------------\n\n  function createButton(params) {\n    var listName = params.listName;\n    var itemName = params.itemName;\n    var elemTag = params.elemTag;\n    var elemText = params.elemText;\n    var type = params.type;\n    var list = params.list;\n    var action = params.action;\n    var currentVal = currents[itemName];\n    var attrs = params.attrs;\n    var currentNum = list.indexOf(currentVal);\n    var canDisableAll = params.canDisableAll;\n\n    var id = itemName;\n    var input = doc.createElement(elemTag);\n    setClasses( input, [\n      panelClass + '__control',\n      panelClass + '__control--' + type\n    ]);\n    input.setAttribute('type', type);\n    input.setAttribute('id', id);\n    setData( input, 'state-num', currentNum );\n\n    if ( attrs ) {\n      for (var attr in attrs) {\n        input.setAttribute(attr, attrs[attr]);\n      }\n    }\n\n    if (elemTag === 'button') {\n      input.innerHTML = elemText;\n    }\n\n    if ( !canDisableAll ) {\n      canBeDisabled.push(input);\n    }\n\n    controlsPanel.appendChild(input);\n\n    input.onclick = function() {\n      if (!params.target) {\n        return;\n      }\n\n      currentNum = +!currentNum;\n      currentVal = list[currentNum];\n\n      setData( input, 'state-num', currentNum );\n      setData( params.target.elem, itemName, currentVal );\n\n      saveLocalStorage(itemName, currentVal);\n\n      if (canDisableAll && canDisableAll === true) {\n        if (currentVal === 'off'){\n          removeCurrentStyles();\n          disableInputs();\n        }\n        else {\n          applyCurrentStyles();\n          enableInputs();\n        }\n      }\n    };\n  }\n\n  //---------------------------------------------\n\n  function createInputNumber(params) {\n    var itemName = params.itemName;\n    var attrs = params.attrs;\n    var type = params.type;\n    var setAttr = params.setAttr;\n    var canDisableAll = params.canDisableAll;\n\n    var id = itemName;\n    var input = doc.createElement('input');\n    setClasses( input, [\n      panelClass + '__control',\n      panelClass + '__control--' + type\n    ]);\n    input.setAttribute('type', type);\n    input.setAttribute('id', id);\n\n    for (var attr in attrs) {\n      input.setAttribute(attr, attrs[attr]);\n    }\n    input.setAttribute('value', currents[itemName]);\n\n    if ( !canDisableAll ) {\n      canBeDisabled.push(input);\n    }\n\n    controlsPanel.appendChild(input);\n\n    input.oninput = function() {\n      if (setAttr === 'style') {\n        params.target.elem.style[itemName] = this.value;\n        saveLocalStorage(itemName, this.value);\n      }\n    };\n  }\n\n  //---------------------------------------------\n\n  function createDragButton() {\n    var input = doc.createElement('button');\n    setClasses( input, [\n      panelClass + '__control',\n      panelClass + '__control--drag-n-drop'\n    ]);\n    input.setAttribute('type', 'button');\n    input.innerHTML = ' ';\n\n    controlsPanel.appendChild(input);\n\n    input.onmousedown = function () {\n      //Place it here to get real sizes after\n      // external styles has been loaded\n      var offsetTop = this.offsetTop;\n      var offsetLeft = controlsPanel.clientWidth - this.clientWidth;\n      var styles = getComputedStyle(controlsPanel);\n\n      controlsPanel.style.top = styles.top;\n      controlsPanel.style.left = styles.left;\n      controlsPanel.style.right = 'auto';\n      controlsPanel.style.bottom = 'auto';\n\n      doc.onmousemove = function ( ev ) {\n        var x = (ev.clientX - offsetLeft ) + 'px';\n        var y = (ev.clientY) + 'px';\n\n        controlsPanel.style.left = x;\n        controlsPanel.style.top = y;\n      };\n    };\n\n    input.onmouseup = function () {\n      var styles = getComputedStyle(controlsPanel);\n      var left = +styles.left.replace(/px/,'');\n      var right = +styles.right.replace(/px/,'');\n      var top = +styles.top.replace(/px/,'');\n      var bottom = +styles.bottom.replace(/px/,'');\n\n      if ( left > right ) {\n        saveLocalStorage('left', 'auto');\n        saveLocalStorage('right', styles.right);\n\n        controlsPanel.style.right = styles.right;\n        controlsPanel.style.left = 'auto';\n      }\n      else {\n        saveLocalStorage('left', styles.left);\n        saveLocalStorage('right', 'auto'); //'auto' needs to override default position;\n      }\n      if ( top > bottom ) {\n        saveLocalStorage('top', 'auto');\n        saveLocalStorage('bottom', styles.bottom);\n\n        controlsPanel.style.bottom = styles.bottom;\n        controlsPanel.style.top = 'auto';\n      }\n      else {\n        saveLocalStorage('top', styles.top);\n        saveLocalStorage('bottom', 'auto');\n      }\n\n      doc.onmousemove = null;\n    };\n  }\n\n  //---------------------------------------------\n\n  function disableInputs() {\n    canBeDisabled.forEach(function(item) {\n      item.setAttribute('disabled', '');\n    });\n  }\n\n  //---------------------------------------------\n\n  function enableInputs() {\n    canBeDisabled.forEach(function(item) {\n      item.removeAttribute('disabled');\n    });\n  }\n\n  //---------------------------------------------\n\n  function getCurrent(name, defaultValue) {\n    var itemName = [prefix, name].join('-');\n    var localStorageVal = localStorage[ itemName ];\n    return localStorageVal ? localStorageVal : defaultValue;\n  }\n\n  //---------------------------------------------\n\n  function saveLocalStorage(name, value) {\n    var itemName = [prefix, name].join('-');\n    localStorage[itemName] = value;\n  }\n\n  //---------------------------------------------\n\n  // Not used\n  function getBodyOpacity() {\n    var opacityStr = getComputedStyle(doc.body).opacity;\n    return +opacityStr;\n  }\n\n  //---------------------------------------------\n\n  // Not used\n  function addExternalCSS() {\n    var styleElem = doc.createElement('style');\n    var cssLink = doc.createElement('link');\n    cssLink.setAttribute('rel', 'stylesheet');\n    cssLink.setAttribute('href', '../pixel-glass-js/styles.css');\n\n    doc.head.appendChild(cssLink);\n  }\n\n  //---------------------------------------------\n\n  function applyCurrentData() {\n    for (var key in targets ) {\n      var target = targets[ key ];\n      var current = currents[ key ];\n\n      if (target.attr === 'data') {\n        setData( target.elem, key, current );\n      }\n    }\n\n    if(currents.state === 'off') {\n      disableInputs();\n    }\n  }\n  //---------------------------------------------\n\n  function applyCurrentStyles() {\n    for (var key in targets ) {\n      var target = targets[ key ];\n      var current = currents[ key ];\n\n      if (target.attr === 'style') {\n        target.elem.style[ key ] = current;\n      }\n    }\n  }\n\n  //---------------------------------------------\n\n  function removeCurrentStyles() {\n    for (var key in targets ) {\n      var target = targets[ key ];\n\n      if (target.attr === 'style') {\n        target.elem.style[ key ] = '';\n      }\n    }\n  }\n\n  //---------------------------------------------\n\n  // Made for IE10, it doesn't support dataset\n\n  function hasData( elem, dataName ) {\n    if ( !elem ) {\n      return false;\n    }\n\n    dataName = 'data-' + dataName;\n\n    if ( elem.getAttribute( dataName) !== undefined && elem.getAttribute( dataName) !== null ) {\n      return true;\n    }\n\n    return false;\n  }\n\n  //---------------------------------------------\n\n  function setData( elem, dataName, dataVal ) {\n    if ( !elem ) {\n      return;\n    }\n\n    dataName = 'data-' + dataName;\n    elem.setAttribute( dataName, dataVal );\n  }\n\n  //---------------------------------------------\n\n  // Made for IE10, it doesn't support\n  // multiply classes for classList.add\n\n  function setClasses( elem, classes ) {\n    if ( !elem ) {\n      return;\n    }\n\n    if ( classes.length > 0 ) {\n      classes.forEach( function ( className ) {\n        elem.classList.add( className );\n      });\n    }\n  }\n\n  //---------------------------------------------\n}\n\nwindow.onload = function () {\n  pixelGlass();\n};\n"]}